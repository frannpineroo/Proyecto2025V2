@namespace Proyecto2025.Server.Client.Componentes

@code {
    [Parameter] public string? Sender { get; set; }
    [Parameter] public string Text { get; set; } = string.Empty;
    [Parameter] public string Time { get; set; } = string.Empty;
    [Parameter] public bool IsOwn { get; set; }
    [Parameter] public int MessageId { get; set; }

    // Nuevos parámetros para selección
    [Parameter] public bool ShowCheckbox { get; set; }
    [Parameter] public bool IsSelected { get; set; }
    [Parameter] public EventCallback<int> OnToggleSelected { get; set; }
}

<div class="message @(IsOwn ? "own" : "other")">
    <div class="bubble">
        @if (ShowCheckbox)
        {
            <label class="select-checkbox">
                <input type="checkbox" checked="@IsSelected" @onchange="() => OnToggleSelected.InvokeAsync(MessageId)" />
            </label>
        }

        @if (!string.IsNullOrEmpty(Sender))
        {
            <span class="sender">@Sender</span>
        }

        <p>@Text</p>
        <span class="time">@Time</span>
    </div>
</div>

<style>
    .message {
        display: flex;
        margin-bottom: 10px;
    }

        .message.own {
            justify-content: flex-end;
        }

        .message.other {
            justify-content: flex-start;
        }

    .bubble {
        max-width: 70%;
        padding: 10px 14px;
        border-radius: 10px;
        background: #ececec;
        position: relative;
        display: flex;
        flex-direction: column;
    }

    .message.own .bubble {
        background: #7a5af8;
        color: white;
    }

    .sender {
        font-size: 11px;
        font-weight: bold;
        color: #555;
        display: block;
        margin-bottom: 4px;
    }

    .message.own .sender {
        color: #eee;
    }

    .time {
        font-size: 10px;
        color: #888;
        display: block;
        text-align: right;
        margin-top: 4px;
    }

    /* Checkbox estilo */
    .select-checkbox {
        position: absolute;
        left: -28px;
        top: 8px;
        display: inline-block;
    }

    .select-checkbox input[type="checkbox"] {
        width: 16px;
        height: 16px;
        cursor: pointer;
    }
</style>